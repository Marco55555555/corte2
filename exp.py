import numpy as np
import matplotlib.pyplot as plt

def exp1(m,stat,click):
    new_stat = stat
    while click>=1:
        click -= 1
        new_stat = np.matmul(m,new_stat)
    return new_stat

def exp2(m,stat,click):
    new_stat = stat
    m1 = m
    for i in range(0, click):
        m = np.matmul(m1,m1)
    new_stat = np.dot(m, stat)
    return "Matriz:",np.array(m).tolist(),"Nuevo:",np.array(new_stat).tolist()

def exp3(m,stat,click):
    for i in range(len(m)):
        for j in range(len(m[0])):
            m[i][j] = norma(m[i][j])
    new_stat = stat
    m2 = m
    for i in range(0, click):
        m = np.matmul(m2,m2)
    new_stat = np.dot(m, stat)
    for i in range(len(matriz)):
        if new_stat[i] > 1:
            new_stat[i] = 0
        for j in range(len(m)):
            if m[i][j] > 1:
                m[i][j] = 0
    return "Matriz:",np.array(matrix).tolist(),"Nuevo:",np.array(new_state).tolist()

"Pruebas"
def tes_exp1_1():
    # 1 click
    matrix = [[0,0,0,0,0,0],[0,0,0,0,0,0],[0,1,0,0,0,1],[0,0,0,1,0,0],[0,0,1,0,0,0],[1,0,0,0,1,0]]
    state = [0,2,1,5,3,10]
    if exp1(matrix,state,1) == [0,0,12,5,1,3]:
        return (print("Prueba 1 Existosa"))

def tes_exp1_2():
    # 2 clicks
    matrix = [[0,0,0,0,0,0], [0,0,0,0,0,0], [0,1,0,0,0,1], [0,0,0,1,0,0], [0,0,1,0,0,0],[1,0,0,0,1,0]]
    state = [0,2,1,5,3,10]
    if exp1(matrix, state, 2) == [0,0,3,5,12,1]:
        return (print("Prueba 2 Existosa"))

def tes_exp2_1():
    # 1 click
    matrix = [[0,0,0,0,0,0,0,0],[1/2,0,0,0,0,0,0,0],[1/2,0,0,0,0,0,0,0],[0,1/3,0,0,0,0,0,0],[0,1/3,0,0,0,0,0,0],[0,1/3,1/3,0,0,0,0,0],[0,0,1/3,0,0,0,0,0],[0,0,1/3,0,0,0,0,0]]
    state = [1,0,0,0,0,0,0,0]
    if exp2(matrix,state,1) == ('Matriz:', [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.16666666666666666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.16666666666666666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.3333333333333333, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.16666666666666666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.16666666666666666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]], 'Estado nuevo:', [0.0, 0.0, 0.0, 0.16666666666666666, 0.16666666666666666, 0.3333333333333333, 0.16666666666666666, 0.16666666666666666]):
        return (print("Prueba 1 Existosa"))

def tes_exp2_2():
    # 2 clicks
    matrix = [[0,0,0,0,0,0,0,0],[1/2,0,0,0,0,0,0,0],[1/2,0,0,0,0,0,0,0],[0,1/3,0,0,0,0,0,0],[0,1/3,0,0,0,0,0,0],[0,1/3,1/3,0,0,0,0,0],[0,0,1/3,0,0,0,0,0],[0,0,1/3,0,0,0,0,0]]
    state = [1,0,0,0,0,0,0,0]
    if exp2(matrix, state, 2) == ('Matriz:', [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.16666666666666666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.16666666666666666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.3333333333333333, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.16666666666666666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.16666666666666666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]], 'Estado nuevo:', [0.0, 0.0, 0.0, 0.16666666666666666, 0.16666666666666666, 0.3333333333333333, 0.16666666666666666, 0.16666666666666666]):
        (print("Prueba 2 Existosa"))

def tes_exp3_1():
    # 1 click
    matrix = [[0,0,0,0,0,0,0,0],[1/math.sqrt(2),0,0,0,0,0,0,0],[1/math.sqrt(2),0,0,0,0,0,0,0],[0,-1+1j/math.sqrt(6),0,0,0,0,0,0],[0,-1+1j/math.sqrt(6),0,0,0,0,0,0],[0,-1+1j/math.sqrt(6),-1+1j/math.sqrt(6),0,0,0,0,0],[0,0,-1+1j/math.sqrt(6),0,0,0,0,0],[0,0,-1+1j/math.sqrt(6),0,0,0,0,0]]
    state = [1,0,0,0,0,0,0,0]
    if exp3(matrix,state,1) == ('Matriz:', [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.5833333333333333, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.5833333333333333, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.5833333333333333, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.5833333333333333, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]], 'Estado nuevo:', [0.0, 0.0, 0.0, 0.5833333333333333, 0.5833333333333333, 0.0, 0.5833333333333333, 0.5833333333333333]):
        return (print("Prueba 1 Existosa"))

def tes_exp3_2():
    # 2 clicks
    matrix = [[0,0,0,0,0,0,0,0],[1/math.sqrt(2),0,0,0,0,0,0,0],[1/math.sqrt(2),0,0,0,0,0,0,0],[0,-1+1j/math.sqrt(6),0,0,0,0,0,0],[0,-1+1j/math.sqrt(6),0,0,0,0,0,0],[0,-1+1j/math.sqrt(6),-1+1j/math.sqrt(6),0,0,0,0,0],[0,0,-1+1j/math.sqrt(6),0,0,0,0,0],[0,0,-1+1j/math.sqrt(6),0,0,0,0,0]]
    state = [1,0,0,0,0,0,0,0]
    if exp3(matrix,state,1) == ('Matriz:', [[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.5833333333333333, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.5833333333333333, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.5833333333333333, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], [0.5833333333333333, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]], 'Estado nuevo:', [0.0, 0.0, 0.0, 0.5833333333333333, 0.5833333333333333, 0.0, 0.5833333333333333, 0.5833333333333333]):
        return (print("Prueba 2 Existosa"))
